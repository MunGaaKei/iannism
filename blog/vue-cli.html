<html><head><meta charset="utf-8"><title>使用 vue-cli</title><meta name="viewport" content="initial-scale=1,maximum-scale=1, minimum-scale=1">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><link rel="shortcut icon" href="../ico.ico" type="image/x-icon"><link rel="stylesheet" href="../css/blog.css"><link rel="stylesheet" href="../css/prism.css"></head>
<body>
<!-- insert .container -->
<div class="container"><header id="header" class="header clearfix"><h2>使用 vue-cli</h2><p class="clearfix"><a href="https://mungaakei.github.io/picasso">满家淇</a><time>2017-7-22</time><a href="#" class="fr">顶部</a><a href="https://mungaakei.github.io/picasso/#blog" class="fr">更多</a></p></header><div class="content"><div><br></div><h2>写在前面</h2><div><br></div>为了以后在网站构建时多一些技术选择，本着学习的态度，花了点时间去基本熟悉了 VUE 这个框架。关于 VUE 以及它的用法这里就不多介绍，<a href="https://cn.vuejs.org">官网在此</a>。<div><br></div><div>对于 VUE，目前我看上的主要只有 <b>数据双向绑定</b> 和 <b>组件</b> 两个地方，但这两点也正是 VUE 的特点和重要部分之一。下面我写的是一些在使用vue-cli上的过程和说明，也可以通过下面的项目进行一定了解。</div><div><br></div><div>这篇文章主要用于参考，因为我也是个FISH，在一些地方可能说得有些偏差，所以非常欢迎指正（可以通过<a href="http://weibo.com/1807771927/profile">微博私信</a>或主页上的邮箱地址），共同进步。</div><div><br></div><div><br></div><div><br></div><div><br></div><h1>开始</h1><div><br></div><div>vue-cli的安装以及项目目录文件介绍在这里<a href="http://www.jianshu.com/p/2b661d01eaf8">简书的文章</a>有说明，可以去进行参考。<br></div><div>目录结构（搬自别人的图）：</div><div><br></div><div><img src="http://upload-images.jianshu.io/upload_images/3868852-dc56e16bc1ae6b13.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h2>路由控制</h2><div><br></div><div>我们在 src 里建好 pages 文件夹，里面存放页面：“index.vue”和“catalog.vue”。然后在 route/index.js 里可以控制路由进行页面的切换：</div><div><br></div><div><pre><code class="language-js">import Vue from 'vue'
import Router from 'vue-router'
import Index from '@/pages/Index'
import Catalog from '@/pages/Catalog'

Vue.use(Router)

export default new Router({
  routes: [
    {
      path: '/',
      name: 'Index',
      component: Index
    },
    {
      path: '/catalog',
      name: 'Catalog',
      component: Catalog
    }
  ]
})</code></pre><br></div><div>这里使用 VUE 的思想也是每个页面可以根据业务功能划分成多个小组件，即每个页面可以由多个小组件构成。这些小组件我们存放在 components 文件夹里。比如 header、a、b、c、footer等我们都可以做成一个小组件。</div><div><br></div><div><br></div><div><br></div><div><br></div><h2>tab效果切换子组件</h2><div><br></div><div>页面结构：</div><div><br></div><div><pre><code class="language-js">&lt;template&gt;
  &lt;div id="tabs"&gt;
    &lt;pheader&gt;&lt;/pheader&gt;
    &lt;a href="javascript:;" @click="toggleTab('a')"&gt;a&lt;/a&gt;
    &lt;a href="javascript:;" @click="toggleTab('b')"&gt;b&lt;/a&gt;
    &lt;a href="javascript:;" @click="toggleTab('c')"&gt;c&lt;/a&gt;
    &lt;component :is="currentPage" keep-alive&gt;&lt;/component&gt;
    &lt;pfooter&gt;&lt;/pfooter&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import pheader from '../components/pHeader'
import pfooter from '../components/pFooter'
import a from '../components/a'
import b from '../components/b'
import c from '../components/c'
export default {
  name: 'tabs',
  data () {
    return {
      currentPage: 'a'
    }
  },
  methods: {
    toggleTab (tabName) {
      this.currentPage = tabName
    }
  },
  components: {
    pheader,
    a,
    b,
    c,
    pfooter
  }
}
&lt;/script&gt;
</code></pre><br></div><div>当点击a, b, c三个按钮，会触发 toggleTab 事件，参数会改变 currentPage 这个属性，而这个属性也绑定在 &lt;component&gt;上，:is会进行判断该组件会用a、b、c中哪个组件进行渲染。keep-alive会使被替换的组件不被内存回收。</div><div><br></div><div><br></div><div><br></div><h2>组件通信</h2><div><br></div><div><b>父子组件之间进行通信</b></div><div><b><br></b></div><div>父组件：</div><div><br></div><div><pre><code class="language-js">&lt;template&gt;
  &lt;div id="tabs"&gt;
    &lt;pheader :message="content" @reciever="getMessage"&gt;&lt;/pheader&gt;
    &lt;pbody&gt;&lt;/pbody&gt;
    &lt;pfooter&gt;&lt;/pfooter&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import pheader from '../components/pHeader'
import pbodyfrom '../components/pBody'
import pfooter from '../components/pFooter'
data () {
    return {
      content: 'hello',
      recv: ''
    }
  },
  methods: {
    getMessage (msg) {
      this.recv = msg
    }
  },
  components: {
    pheader,
    pbody,
    pfooter
  }
&lt;/script&gt;</code></pre></div><div><br></div><div><br></div><div>子组件 pHeader.vue：</div><div><br></div><div><pre><code class="language-js">&lt;template&gt;
  &lt;div id="pheader"&gt;<br>      &lt;a href="javascript:;" @click="reply"&gt;reply '{{ message }}'&lt;/a&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import menu from '../data/menu.json'
export default {
  props: ['message'],
  data () {
    return { }
  },
  methods: {
    reply () { this.$emit('reciever', 'hi') }
  }
}
&lt;/script&gt;</code></pre><br></div><div><br></div><div>在上面示例中</div><div><br></div><div>1. 父组件传递信息给子组件：父组件在&lt;pheader&gt;里的 :message="content" 代表着在它把自己的属性 content="hello" 传递给了子组件pheader。</div><div><br></div><div>2. 子组件获取父组件传递过来的信息：在子组件里，需要通过 props: ["message"] 来获取父组件信息，这里的message与父组件那个message相对应。之后子组件就可以使用这个信息了。</div><div><br></div><div>3. 子组件传递信息给父组件：当我们点击 reply hello 按钮，即触发 reply()，在reply函数中，子组件会 $emit 广播信息。$emit() 的第一个参数下面第4点讲，第二个参数则是传递的信息。</div><div><br></div><div>4. 父组件获取子组件传递过来的信息：父组件在&lt;pheader&gt;里的 @<span style="font-family: &quot;Microsoft Yahei&quot;; background-color: rgb(238, 238, 238);">reciever</span>="<span style="font-family: &quot;Microsoft Yahei&quot;; background-color: rgb(238, 238, 238);">getMessage</span>" 代表着当父组件收到pheader组件里的广播（reciever）时，会触发 getMessage 函数，并获取传递过来的信息。<br></div><div><br></div><div><b><br></b></div><div><b><br></b></div><div><b>兄弟组件之间的通信</b></div><div><br></div><div>其实在这个项目里并没有使用这个方法，似乎有三个思路可以参考：</div><div><br></div><div>1. 可以通过新建一个新的 vue 实例作为中间商，再通过它的 $emit 与 $on 进行通信</div><div>2. Event Bus</div><div>3. Vuex</div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h2>图片资源加载</h2><div><br></div><div>这个项目是默认使用了 webpack ，所以在绑定图片 src 等情况时，需要通过数据绑定。</div><div><br></div><div>先在 data () { return { src: require('your/path/to/image') } }</div><div>然后再在template里 &lt;img v-bind:src="src"&gt;（v-bind可略）</div><div><br></div><div>否则按照常规的填写方法是不会把图片加载进去的，也就会出现&nbsp;<font color="#eb7350">404&nbsp;</font>的问题。</div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h2>一些总结</h2><div><br></div><div>经过项目的实践，个人觉得新手学习vue时从vue-cli开刀并不是一个很好的选择。它会使你一开始便迷失在组件的各种问题之中，而你可能还没了解vue的一些基本用法并且暂时也没有什么方式去开始熟悉基础。而且在&lt;script&gt;里的语法也要求很严格，特别是空格、单双引号的使用，以及分号的习惯。在遇到bug的时候也没有特别详细的错误码指示，所以有些时候需要自己思考问题的所在及解决。在项目的过程中，我也思考过是否直接引入vue.js会让同样的项目实现得更简单快捷一点，目前我的答案为是，至少基于现在我的VUE能力来说。对于一些高手来说可能会有更多的答案，还需学习。</div><div><br></div><div>以上是我的一些困惑，当然我也把这归结于自己的还不够熟悉VUE，不过这的确是对于一个FISH的一个直接直观感受。</div><div>没有任何对于VUE的贬，以后会继续深入学习VUE，才能解决遇到的问题和更好的使用VUE。</div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><h1>项目地址</h1><div><br></div><div>Github：<a href="https://github.com/MunGaaKei/pMarket">https://github.com/MunGaaKei/pMarket</a></div><div><br></div><div>载下来后npm进入项目文件夹后，</div><div>安装依赖包：npm install</div><div>运行项目：npm start</div><div><br></div></div><div><br></div><div><br></div><div><b>谢谢阅读！</b></div><div><br></div><div><br></div></div></div>
<script src="../js/prism.js"></script><script src="../js/blog.js"></script>
</body>
